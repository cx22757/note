# Rust所有权、借用类型、借用规则、生命周期标注

# 设计一个新语言

如何设计一个无GC的自动内存回收的编程语言。

* 确定回收时机
* 



## 借用类型

分为不可变借用和可变借用。

```rust
let a = &T		// 不可变借用
let b = &mut T	// 可变借用
```

### 消除`->`

**语法糖**：借用类型与源类型是不同的类型，但借用类型也能通过`.`操作符直接访问成员变量。

### 借用类型大小

| 类型           | 内存表示    | 大小（字） |
| -------------- | ----------- | ---------- |
| `&T`, `&mut T` | 普通指针    | 1          |
| `&[T]`, `&str` | 指针+长度   | 2          |
| `&dyn Trait`   | 指针+vtable | 2          |

## 借用规则

与读写锁的逻辑类似，可同时存在多个读锁，但写锁只能存在一个，且写锁是**独占的**。

从“设计一个无GC的内存自动回收编程语言”开始，一步步推导出Rust的所有权、借用、借用规则。

1. 如果想要设计一个无GC的内存自动回收编程语言，需要定义哪些规则？

2. 为了实现这些

